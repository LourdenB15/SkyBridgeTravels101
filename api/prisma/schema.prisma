generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id               String    @id @default(uuid())
  email            String    @unique
  password         String
  firstName        String
  lastName         String
  resetToken       String?
  resetTokenExpiry DateTime?
  deletedAt        DateTime?
  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  bookings Booking[]
}

model Hotel {
  id          String   @id @default(uuid())
  name        String
  description String
  address     String
  latitude    Float
  longitude   Float
  rating      Float
  images      String[]
  amenities   String[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  rooms    Room[]
  bookings Booking[]
}

model Room {
  id            String   @id @default(uuid())
  hotelId       String
  name          String
  description   String
  maxGuests     Int
  pricePerNight Decimal
  images        String[]
  available     Boolean  @default(true)

  hotel    Hotel     @relation(fields: [hotelId], references: [id])
  bookings Booking[]
}

model Booking {
  id             String   @id @default(uuid())
  bookingRef     String   @unique
  userId         String
  hotelId        String
  roomId         String
  guestFirstName String
  guestLastName  String
  guestEmail     String
  checkInDate    DateTime
  checkOutDate   DateTime
  numberOfGuests Int
  totalPrice     Decimal
  status         String   @default("pending")
  paymentId      String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  user  User  @relation(fields: [userId], references: [id])
  hotel Hotel @relation(fields: [hotelId], references: [id])
  room  Room  @relation(fields: [roomId], references: [id])
}
